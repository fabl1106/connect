{% extends 'base.html' %}
{% block head %}
    <style>
        .memo {
            display: inline-block;
            width: 200px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    </style>

{% endblock %}
{% block title %}
    Connect
{% endblock %}

{% block content %}
    <br>
    <h2><div style="padding: 15px 0px 20px 10px">Today Connect!</div></h2>
    <table class="table table-striped">
        <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Phone</th>
            <th scope="col">Relation</th>
            <th scope="col">최근 연락일</th>
            <th scope="col">연락 예정</th>
            <th scope="col">최근 소식</th>
            <th scope="col">연락하셨나요?</th>
        </tr>
        </thead>
        <tbody>
        {% for object in object_list %}
            {% if object.user == request.user %}
                {# {% if forloop.counter <= 5 %} #}
{#                {% if object.scheduled_connect < datetime.now %}#}
                <tr>
                    {#        <th scope="row">{{ object.id }}</th>#}
                    {#        <td><a href="{% url 'friend:detail' object.id %}">{{ object.friend_name }}</a></td>#}
                    <td onclick="detail1('{{ object.id }}')"><font color="#2E64FE">{{ object.friend_name }}</font></td>
                    <td>{{ object.friend_mobile }}</td>
                    <td>{{ object.friend_relation }}</td>
                    <td id="change{{ object.id }}">{{ object.latest_connect }}</td>
                    <td id="scheduled{{ object.id }}">{{ object.scheduled_connect }}</td>
                    <td class="memo">{{ object.friend_memo }}</td>
                    <td>
                        <BUTTON onclick="connect('{{ object.id }}')">연락함</BUTTON>
                    </td>
                    {#                    <td><input type="checkbox" aria-label="Checkbox for following text input" id="Connect"></td>#}

                </tr>
{#                {% endif %}#}
            {% endif %}
        {% endfor %}
        </tbody>
    </table>
    <div id="detail1" class="col">

{#        {% load static %}#}
{#        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">#}
{#            <ol class="carousel-indicators">#}
{#                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>#}
{#                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>#}
{#                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>#}
{#            </ol>#}
{#            <div class="carousel-inner">#}
{#                <div class="carousel-item active" data-interval="5000">#}
{#                    <img src="{% static 'images/main2.jpeg' %}" class="d-block w-100" alt="...">#}
{#                </div>#}
{#                <div class="carousel-item" data-interval="5000">#}
{#                    <img src="{% static 'images/main3.jpeg' %}" class="d-block w-100" alt="...">#}
{#                </div>#}
{#                <div class="carousel-item" data-interval="5000">#}
{#                    <img src="{% static 'images/main4.jpeg' %}" class="d-block w-100" alt="...">#}
{#                </div>#}
{#            </div>#}
{#            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">#}
{#                <span class="carousel-control-prev-icon" aria-hidden="true"></span>#}
{#                <span class="sr-only">Previous</span>#}
{#            </a>#}
{#            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">#}
{#                <span class="carousel-control-next-icon" aria-hidden="true"></span>#}
{#                <span class="sr-only">Next</span>#}
{#            </a>#}
{#        </div>#}
    </div>
     <script type="text/javascript">
        function detail1(id) {
            $.ajax({
                url: "/detail1/" + id,
                method: "GET",
                success: function (result) {
                    $("#detail1").html(result);
                },
                error: function (error) {

                }
            });
        }

        function connect(id) {
            $.ajax({
                url: "/connect/" + id,
                method: "GET",
                success: function (result) {
                    $("#change" + id).html(result.latest_connect);
                    $("#scheduled" + id).html(result.scheduled_connect);
                },
                error: function (error) {
                    console.log(error)
                }
            });
        }


    </script>
{% endblock %}

